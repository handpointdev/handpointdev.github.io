<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-Android SDK 7.1010.3 plugin-docs plugin-id-android docs-doc-id-androidtransactions">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Transaction Types | Handpoint</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://developer.handpoint.io/android/androidtransactions"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="Android SDK 7.1010.3"><meta data-rh="true" name="docusaurus_tag" content="docs-android-Android SDK 7.1010.3"><meta data-rh="true" name="docsearch:version" content="Android SDK 7.1010.3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-android-Android SDK 7.1010.3"><meta data-rh="true" property="og:title" content="Transaction Types | Handpoint"><meta data-rh="true" name="description" content="Sale"><meta data-rh="true" property="og:description" content="Sale"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://developer.handpoint.io/android/androidtransactions"><link data-rh="true" rel="alternate" href="https://developer.handpoint.io/android/androidtransactions" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.handpoint.io/android/androidtransactions" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Handpoint RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Handpoint Atom Feed"><link rel="stylesheet" href="/assets/css/styles.b7a35c4c.css">
<link rel="preload" href="/assets/js/runtime~main.a0df38ac.js" as="script">
<link rel="preload" href="/assets/js/main.483f6cad.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/handpoint-logo-hvitt.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA" width="75"><img src="/img/handpoint-logo-hvitt.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU" width="75"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Getting Started</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/android/androidintroduction">Android SDK 7.1010.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/android/next/androidtransactions">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/android/androidtransactions">Android SDK 7.1010.3</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1010.2/androidtransactions">Android SDK 7.1010.2</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1010.1/androidtransactions">Android SDK 7.1010.1</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1009.5/androidtransactions">Android SDK 7.1009.5</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1008.6/androidtransactions">Android SDK 7.1008.6</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1008.5/androidtransactions">Android SDK 7.1008.5</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1008.4/androidtransactions">Android SDK 7.1008.4</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1008.3/androidtransactions">Android SDK 7.1008.3</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1008.1/androidtransactions">Android SDK 7.1008.1</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1008.0/androidtransactions">Android SDK 7.1008.0</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1006.3/androidtransactions">Android SDK 7.1006.3</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1006.2/androidtransactions">Android SDK 7.1006.2</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1006.1/androidtransactions">Android SDK 7.1006.1</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1006.0/androidtransactions">Android SDK 7.1006.0</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1005.4/androidtransactions">Android SDK 7.1005.4</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1005.3/androidtransactions">Android SDK 7.1005.3</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1005.2/androidtransactions">Android SDK 7.1005.2</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1005.1/androidtransactions">Android SDK 7.1005.1</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1005.0/androidtransactions">Android SDK 7.1005.0</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1004.2/androidtransactions">Android SDK 7.1004.2</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1004.1/androidtransactions">Android SDK 7.1004.1</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1004.0/androidtransactions">Android SDK 7.1004.0</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1002.0/androidtransactions">Android SDK 7.1002.0</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.1001.0/androidtransactions">Android SDK 7.1001.0</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.0.2/androidtransactions">Android SDK 7.0.2</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.0.1/androidtransactions">Android SDK 7.0.1</a></li><li><a class="dropdown__link" href="/android/Android SDK 7.0.0/androidtransactions">Android SDK 7.0.0</a></li><li><a class="dropdown__link" href="/android/Android SDK 6.7.4/androidtransactions">Android SDK 6.7.4</a></li><li><a class="dropdown__link" href="/android/Android SDK 6.7.2/androidtransactions">Android SDK 6.7.2</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/restapi/restintroduction">REST API 2.20.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/restapi/next/restintroduction">Next</a></li><li><a class="dropdown__link" href="/restapi/restintroduction">REST API 2.20.0</a></li><li><a class="dropdown__link" href="/restapi/REST API 2.17.0/restintroduction">REST API 2.17.0</a></li><li><a class="dropdown__link" href="/restapi/REST API 2.15.0/restintroduction">REST API 2.15.0</a></li><li><a class="dropdown__link" href="/restapi/REST API 2.14.0/restintroduction">REST API 2.14.0</a></li><li><a class="dropdown__link" href="/restapi/REST API 2.13.0/restintroduction">REST API 2.13.0</a></li><li><a class="dropdown__link" href="/restapi/REST API 2.12.0/restintroduction">REST API 2.12.0</a></li><li><a class="dropdown__link" href="/restapi/REST API 2.10.0/restintroduction">REST API 2.10.0</a></li><li><a class="dropdown__link" href="/restapi/REST API 2.7.1/restintroduction">REST API 2.7.1</a></li><li><a class="dropdown__link" href="/restapi/REST API 2.6.0/restintroduction">REST API 2.6.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/ios/iosintroduction">iOS SDK 4.0.2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ios/next/iosintroduction">Next</a></li><li><a class="dropdown__link" href="/ios/iosintroduction">iOS SDK 4.0.2</a></li><li><a class="dropdown__link" href="/ios/iOS SDK 4.0.1/iosintroduction">iOS SDK 4.0.1</a></li><li><a class="dropdown__link" href="/ios/iOS SDK 4.0.0/iosintroduction">iOS SDK 4.0.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/windows/windowsintroduction">Windows SDK 4.3.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/windows/next/windowsintroduction">Next</a></li><li><a class="dropdown__link" href="/windows/windowsintroduction">Windows SDK 4.3.1</a></li><li><a class="dropdown__link" href="/windows/Windows SDK 4.2.0/windowsintroduction">Windows SDK 4.2.0</a></li><li><a class="dropdown__link" href="/windows/Windows SDK 4.1.0/windowsintroduction">Windows SDK 4.1.0</a></li><li><a class="dropdown__link" href="/windows/Windows SDK 4.0.0/windowsintroduction">Windows SDK 4.0.0</a></li><li><a class="dropdown__link" href="/windows/Windows SDK 3.4.0/windowsintroduction">Windows SDK 3.4.0</a></li><li><a class="dropdown__link" href="/windows/Windows SDK 3.3.0/windowsintroduction">Windows SDK 3.3.0</a></li><li><a class="dropdown__link" href="/windows/Windows SDK 3.2.5/windowsintroduction">Windows SDK 3.2.5</a></li><li><a class="dropdown__link" href="/windows/Windows SDK 3.2.4/windowsintroduction">Windows SDK 3.2.4</a></li><li><a class="dropdown__link" href="/windows/Windows SDK 3.2.0/windowsintroduction">Windows SDK 3.2.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/javascript/javascriptintroduction">JavaScript SDK 7.2.2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/javascript/next/javascriptintroduction">Next</a></li><li><a class="dropdown__link" href="/javascript/javascriptintroduction">JavaScript SDK 7.2.2</a></li><li><a class="dropdown__link" href="/javascript/JavaScript SDK 7.2.0/javascriptintroduction">JavaScript SDK 7.2.0</a></li><li><a class="dropdown__link" href="/javascript/JavaScript SDK 7.1.0/javascriptintroduction">JavaScript SDK 7.1.0</a></li><li><a class="dropdown__link" href="/javascript/JavaScript SDK 7.0.0/javascriptintroduction">JavaScript SDK 7.0.0</a></li><li><a class="dropdown__link" href="/javascript/JavaScript SDK 6.3.0/javascriptintroduction">JavaScript SDK 6.3.0</a></li><li><a class="dropdown__link" href="/javascript/JavaScript SDK 6.2.1/javascriptintroduction">JavaScript SDK 6.2.1</a></li><li><a class="dropdown__link" href="/javascript/Javascript SDK 6.2.0/javascriptintroduction">Javascript SDK 6.2.0</a></li><li><a class="dropdown__link" href="/javascript/JavaScript SDK 6.1.0/javascriptintroduction">JavaScript SDK 6.1.0</a></li><li><a class="dropdown__link" href="/javascript/JavaScript SDK 6.0.1/javascriptintroduction">JavaScript SDK 6.0.1</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/express/expressintroduction">Express SDK 1.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/express/next/expressintroduction">Next</a></li><li><a class="dropdown__link" href="/express/expressintroduction">Express SDK 1.3</a></li><li><a class="dropdown__link" href="/express/Express SDK 1.2/expressintroduction">Express SDK 1.2</a></li></ul></div><a href="https://www.npmjs.com/package/cordova-plugin-handpoint" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Cordova Plugin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/thescruba/xamarin-handpoint-bindings" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Xamarin Plugin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://handpoint.atlassian.net/wiki/spaces/PD/overview?homepageId=5898250" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://status.handpoint.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-statuspage-icon" aria-label="Status Page"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/android/androidintroduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/android/androidreleasenotes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/android/androidmigrationguide">Migration from 6.X to 7.X</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/android/androidapioverview">Trigger Amounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/android/androidintegrationguide">Integration Guides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/android/androidtransactions">Transaction Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/android/androiddevicemanagement">Terminal Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/android/androideventsubscribers">Events Subscribers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/android/androideventlisteners">Events Listeners</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/android/androidobjects">Objects</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Transaction Types</span><meta itemprop="position" content="1"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Android SDK 7.1010.3</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Transaction Types</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2">Sale<a class="hash-link" href="#2" title="Direct link to heading">​</a></h2><p><code>Sale</code></p><p>A sale initiates a payment operation to the card reader. In it&#x27;s simplest form you only have to pass the amount and currency but it also accepts tip configuration and a map with extra parameters.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#4"><em>SaleOptions</em></a></td><td>An object to store all the customization options for a sale (<a href="/android/next/androidobjects#39">Tip Configuration</a>, <a href="/android/next/androidobjects#metadata">Metadata</a>, <a href="/android/next/androidobjects#money-remittance-options">Money Remittance Options</a>,...)</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a sale for 10.00 in Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">sale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a sale for 10.00 in Great British Pounds with a tipping configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//This feature is only available for PAX and Telpo devices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">TipConfiguration</span><span class="token plain"> tipConfiguration </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">TipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setTipPercentages</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Arrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">asList</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setTipAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setBaseAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setEnterAmountEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setFooter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Thank you&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setSkipEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Metadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Metadata</span><span class="token plain"> metadata </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Data 1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Data 2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Data 3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Data 4&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Data 5&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">SaleOptions</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SaleOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setTipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setMetadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">sale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a sale for 10.00 USD using Money Remitance options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoneyRemittanceOptions</span><span class="token plain"> moneyRemittanceOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;John Doe&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">CountryCode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">USA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">SaleOptions</span><span class="token plain"> saleOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SaleOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> moneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">sale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">USD</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> saleOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#15"><strong>signatureRequired</strong></a></p><p>Invoked if card verification requires signature.</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3">Sale And Tokenize Card<a class="hash-link" href="#3" title="Direct link to heading">​</a></h2><p>A <a href="#2">sale</a> operation which also returns a card token. (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice)</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#sale-and-tokenize-options"><em>SaleAndTokenizeOptions</em></a></td><td>An object to store all the customization options for a sale (<a href="/android/next/androidobjects#39">Tip Configuration</a>, <a href="/android/next/androidobjects#money-remittance-options">Money Remittance Options</a>,...)</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a sale for 10.00 in Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">SaleOptions</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SaleAndTokenizeOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">sale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a sale for 10.00 in Great British Pounds with a tipping configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//This feature is only available for PAX and Telpo devices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">TipConfiguration</span><span class="token plain"> tipConfiguration </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">TipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setTipPercentages</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Arrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">asList</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setTipAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setBaseAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setEnterAmountEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setFooter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Thank you&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setSkipEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">SaleOptions</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SaleOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setTipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tipConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">toSaleAndTokenizeOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">sale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a sale for 10.00 USD using Money Remitance options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoneyRemittanceOptions</span><span class="token plain"> moneyRemittanceOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;John Doe&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">CountryCode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">USA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">SaleAndTokenizeOptions</span><span class="token plain"> saleAndTokenizeOptions</span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SaleAndTokenizeOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">moneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">sale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">USD</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> saleAndTokenizeOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#15"><strong>signatureRequired</strong></a></p><p>Invoked if card verification requires signature.</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p> <strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4">Sale Reversal<a class="hash-link" href="#4" title="Direct link to heading">​</a></h2><p><code>saleReversal</code></p><p>A sale reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id. In its simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within a 24 hours timeframe or until the daily batch of transactions has been sent for submission.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>originalTransactionID</code> <span class="badge badge--primary">Required</span> <br><em>String</em></td><td>Id of the original sale transaction</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#4"><em>SaleOptions</em></a></td><td>An object to store all the customization options for a sale.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a reversal for 10.00 in Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">saleReversal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#15"><strong>signatureRequired</strong></a></p><p>Invoked if card verification requires signature.</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5">Refund<a class="hash-link" href="#5" title="Direct link to heading">​</a></h2><p><code>refund</code></p><p>A refund operation moves funds from the merchant account to the cardholder´s credit card. In it&#x27;s simplest form you only have to pass the amount and currency but it also accepts a map with extra parameters. Note that a card is required to be swiped, dipped or tapped for this operation. For Interac (Canadian Debit Network), refunds can only be processed until Interac closes the batch of transactions at night.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>originalTransactionID</code> <br><em>String</em></td><td>If present it links the refund with a previous sale. It effectively limits the maximum amount refunded to that of the original transaction.</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#6"><em>RefundOptions</em></a></td><td>An object to store all the customization options for a refund (<a href="/android/next/androidobjects#metadata">Metadata</a>, <a href="/android/next/androidobjects#money-remittance-options">Money Remittance Options</a>,...)</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a refund for 10.00 in Great British Pounds (Linked Refund)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">refund</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a refund for 10.00 USD using Money Remitance options (Linked Refund)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoneyRemittanceOptions</span><span class="token plain"> moneyRemittanceOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;John Doe&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">CountryCode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">USA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">RefundOptions</span><span class="token plain"> refundOptions</span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">RefundOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> moneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">refund</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> refundOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong> Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;)</p><hr><p><a href="/android/next/androideventlisteners#15"><strong>signatureRequired</strong></a></p><p>Invoked if card verification requires signature.</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-refund">Automatic Refund<a class="hash-link" href="#automatic-refund" title="Direct link to heading">​</a></h2><p><code>automaticRefund</code></p><p>A refund operation moves funds from the merchant account to the cardholder&#x27;s credit card. This operation allows you to refund a card automatically without requiring the cardholder to dip/tap/swipe his card.  In its simplest form you only have to pass the Original Transaction ID (GUID) to this function. The amount to be refunded will be the same amount as the one of the original sale. </p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>originalTransactionID</code>  <span class="badge badge--primary">Required</span><br><em>String</em></td><td>Links the automatic refund with a previous sale. The amount refunded will be the same as the one of the original transaction.</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#moto-options"><em>MoToOptions</em></a></td><td>An object to store optional parameters for a MoTo refund (<a href="/android/next/androidobjects#moto-channel">MoTo Channel</a>, <a href="/android/next/androidobjects#money-remittance-options">Money Remittance Options</a>,...)</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate an automatic refund</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">automaticRefund</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate an automatic refund using MoTo Options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoToOptions</span><span class="token plain"> moToOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">moToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setChannel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">MoToChannel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">TO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">automaticRefund</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> moToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong> Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;)</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-partial-refund">Automatic Partial Refund<a class="hash-link" href="#automatic-partial-refund" title="Direct link to heading">​</a></h2><p><code>automaticRefund</code></p><p>A refund operation moves funds from the merchant account to the cardholder&#x27;s credit card. This operation allows you to PARTIALLY refund a card automatically without requiring the cardholder to dip/tap/swipe his card.  In its simplest form you only have to pass the amount, currency and the Original Transaction ID (GUID). Note that the amount can not go above the amount of the original sale. If a refund is attempted for an amount higher than the one of the original sale, the transaction will be automatically declined. </p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to refund - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the refund</td></tr><tr><td><code>originalTransactionID</code> <span class="badge badge--primary">Required</span> <br><em>String</em></td><td>Links the refund with a previous sale. It effectively limits the maximum amount refunded to that of the original transaction.</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#moto-options"><em>MoToOptions</em></a></td><td>An object to store optional parameters for a MoTo refund (<a href="/android/next/androidobjects#moto-channel">MoTo Channel</a>, <a href="/android/next/androidobjects#money-remittance-options">Money Remittance Options</a>,...)</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate an automatic partial refund for 5.00 Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">automaticRefund</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;500&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate an automatic partial refund for 5.00 Great British Pounds using MoTo Options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoToOptions</span><span class="token plain"> moToOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">moToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setChannel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">MoToChannel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">MO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">automaticRefund</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;500&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> moToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong> Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;)</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6">Refund reversal<a class="hash-link" href="#6" title="Direct link to heading">​</a></h2><p><code>refundReversal</code></p><p>A refund reversal, also called refund VOID allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id. In it&#x27;s simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within a 24 hours timeframe or until the daily batch of transactions has been sent for submission.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>originalTransactionID</code> <span class="badge badge--primary">Required</span> <br><em>String</em></td><td>transaction id of the original refund</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#4"><em>SaleOptions</em></a></td><td>An object to store all the customization options for the transaction.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a refund reversal for 10.00 in Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">refundReversal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#15"><strong>signatureRequired</strong></a></p><p>Invoked if card verification requires signature.</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7">MoTo Sale<a class="hash-link" href="#7" title="Direct link to heading">​</a></h2><p><code>MoToSale</code></p><p>Mail Order /Telephone Order (MOTO) sale. MOTO is a type of card-not-present (CNP) transaction in which services are paid and delivered via telephone, mail, fax, or internet communication. MOTO has become synonymous with any financial transaction where the entity taking payment does not physically see the card used to make the purchase.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#moto-options"><em>MoToOptions</em></a></td><td>An object to store optional parameters for a MoTo sale (<a href="/android/next/androidobjects#moto-channel">MoTo Channel</a>, <a href="/android/next/androidobjects#money-remittance-options">Money Remittance Options</a>,...)</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a MoTo sale for 10.00 in Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoToOptions</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCustomerReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;MoTo Sale Example&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">motoSale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a MoTo sale for 10.00 USD using Money Remitance options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoneyRemittanceOptions</span><span class="token plain"> moneyRemittanceOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Test Integration&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">CountryCode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">USA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoToOptions</span><span class="token plain"> moToOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">moneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">motoSale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">USD</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> moToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction,  it fetches statuses coming from the sdk (ex : &#x27;processing&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="8">MoTo Refund<a class="hash-link" href="#8" title="Direct link to heading">​</a></h2><p><code>moToRefund</code></p><p>A MOTO refund operation moves funds from the merchant account to the cardholder´s credit card. In it&#x27;s simplest form you only have to pass the amount and currency but it also accepts the original transaction id. MOTO Refund is a type of card-not-present (CNP) transaction in which services are refunded via telephone, mail, fax, or internet communication. MOTO has become synonymous with any financial transaction where the entity taking payment does not physically see the card used to make the purchase or refund.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>originalTransactionId</code> <br><em>String</em></td><td>If present it links the refund with a previous sale. It effectively limits the maximum amount refunded to that of the original transaction.</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#moto-options"><em>MoToOptions</em></a></td><td>An object to store optional parameters for a MoTo refund (<a href="/android/next/androidobjects#moto-channel">MoTo Channel</a>, <a href="/android/next/androidobjects#money-remittance-options">Money Remittance Options</a>,...)</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token class-name">MoToOptions</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCustomerReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;MoTo Refund Example&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">motoRefund</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a MoTo refund for 10.00 USD using Money Remitance options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoneyRemittanceOptions</span><span class="token plain"> moneyRemittanceOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;John Doe&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">CountryCode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">USA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MoToOptions</span><span class="token plain"> moToOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">moneyRemittanceOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">motoRefund</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">USD</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> moToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction,  it fetches statuses coming from the sdk (ex : &#x27;processing&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="9">MoTo Reversal<a class="hash-link" href="#9" title="Direct link to heading">​</a></h2><p><code>moToReversal</code></p><p>A MOTO reversal, also called VOID allows the user to reverse a previous sale/refund operation. This operation reverts (if possible) a specific operation identified with a transaction id. Note that transactions can only be reversed within a 24 hours timeframe or until the daily batch of transactions has been sent for submission. MOTO Reversal is a type of card-not-present (CNP) transaction used to reverse a previous MOTO Sale or MOTO Refund.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>originalTransactionId</code> <span class="badge badge--primary">Required</span>  <br><em>String</em></td><td>Id of the original sale transaction.</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#moto-options"><em>MoToOptions</em></a></td><td>An object to store optional parameters for a MoTo reversal.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token class-name">MoToOptions</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCustomerReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;MoTo Reversal Example&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">motoReversal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction,  it fetches statuses coming from the sdk (ex : &#x27;processing&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="10">MoTo Pre-Auth<a class="hash-link" href="#10" title="Direct link to heading">​</a></h2><p><code>motoPreauthorization</code></p><p>A MOTO pre-auth initiates a pre-authorization operation to the card reader. It&#x27;s used to verify that the account is valid and has sufficient funds to cover a pending transaction, without actually debiting the cardholder&#x27;s account upfront. </p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>options</code> <br><a href="/android/next/androidobjects#moto-options"><em>MoToOptions</em></a></td><td>An object to store optional parameters for a MoTo sale.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token class-name">MoToOptions</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MoToOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCustomerReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;MoTo Sale Example&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">motoPreauthorization</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction,  it fetches statuses coming from the sdk (ex : &#x27;processing&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#OperationStartResult">OperationStartResult</a></em></td><td>Object containing information about the financial operation started.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="signature-result">Signature result<a class="hash-link" href="#signature-result" title="Direct link to heading">​</a></h2><p><code>signatureResult</code></p><p>A signatureRequired event is invoked during a transaction when a signature verification is required (f.ex when a payment is done with a swiped or chip and sign card). The merchant is required to ask the cardholder for signature and approve (or decline) the signature. signatureResult tells the card reader if the signature was approved by passing the value true in the method. To decline a signature event then false should be passed to the card reader. Note that this event is only required for an HiLite or Hi5 integration and can be safely ignored for a PAX or Telpo integration.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>accepted</code> <span class="badge badge--primary">Required</span> <br><em>Boolean</em></td><td>pass true if merchant accepts cardholder signature</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Approves signature automatically in signatureRequired event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">signatureRequired</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">SignatureRequest</span><span class="token plain"> signatureRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Device</span><span class="token plain"> device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">signatureResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#operation-start-result">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tip-adjustment">Tip Adjustment<a class="hash-link" href="#tip-adjustment" title="Direct link to heading">​</a></h2><p><code>TipAdjustment</code></p><p>A tip adjustment operation allows merchants to adjust the tip amount of a sale transaction before the batch of transactions is settled by the processor at the end of the day.
Note: This functionality is only available for the restaurant industry in the United States and the processors currently supporting this functionality are TSYS and VANTIV.</p><p>Dependencies:
The code example provided depends on RxJava, take a look a their documentation to see how to easily include this dependency in your android project. If you do not want to use RxJava or any additional dependencies then AsyncTask, provided by android, can be used instead for this asynchronous processing. Still we recommend using RxJava as it improves readability and maintainability.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>tipAmount</code> <span class="badge badge--primary">Required</span> <br><em>BigDecimal</em></td><td>Tip amount added to the original (base) transaction amount - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>originalTransactionID</code> <span class="badge badge--primary">Required</span> <br><em>String</em></td><td>Unique id of the original sale transaction as received from the card reader (EFTTransactionID)</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token class-name">Observable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">fromCallable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Callable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">FinancialStatus</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">tipAdjustment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigDecimal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2bc23910-c3b3-11e6-9e62-07b2a5f091ec&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscribeOn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Schedulers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">io</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">observeOn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">AndroidSchedulers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">mainThread</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscribe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Consumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">accept</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@NonNull</span><span class="token plain"> </span><span class="token class-name">FinancialStatus</span><span class="token plain"> status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">status </span><span class="token operator">==</span><span class="token plain"> </span><span class="token class-name">FinancialStatus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">AUTHORISED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">//SUCCESS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">status </span><span class="token operator">==</span><span class="token plain"> </span><span class="token class-name">FinancialStatus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">DECLINED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">//DECLINED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">//FAILED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Returns</strong></p><p>Result of the tip adjustment transaction, it returns a FinancialStatus, the possible values are :</p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><strong>FinancialStatus</strong></td><td>- <strong>FinancialStatus.AUTHORISED</strong> (tip adjustment approved by the processor) <br>  - <strong>FinancialStatus.FAILED</strong> (system error or timeout)<br> - <strong>FinancialStatus.DECLINED</strong> (tip adjustment declined by the processor).</td></tr></tbody></table><p>If two tip adjustments are sent for the same sale transaction, the second tip adjustment will override the first one. In case the transaction fails (not declined) we recommend that you prompt the user of the POS to retry the adjustment.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="12">Tokenize Card<a class="hash-link" href="#12" title="Direct link to heading">​</a></h2><p><code>tokenizeCard</code></p><p>Returns a card token (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice)</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>options</code> <br><a href="/android/next/androidobjects#4"><em>SaleOptions</em></a></td><td>An object to store all the customization options for the transaction.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Tokenize a card</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">tokenizeCard</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#operation-start-result">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="13">Card PAN<a class="hash-link" href="#13" title="Direct link to heading">​</a></h2><p><code>cardPan</code></p><p>A cardPan request will return the full PAN of the card being swiped, dipped or tapped. Only the PANs of whitelisted card ranges will be returned by the Handpoint systems. This operation is mostly used to be able to process funds or points from loyalty cards.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>options</code> <br><a href="/android/next/androidobjects#4"><em>SaleOptions</em></a></td><td>An object to store all the customization options for the transaction.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Gets the PAN of a card</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">cardPan</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#operation-start-result">OperationStartResult</a></em></td><td>Object containing information about the financial operation started. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-auth">Pre-Auth<a class="hash-link" href="#pre-auth" title="Direct link to heading">​</a></h2><p><code>preAuthorization</code></p><p>A pre-auth initiates a pre-authorization operation to the card reader. In it&#x27;s simplest form you only have to pass the amount and currency but it also accepts tip configuration and a map with extra parameters.
A pre-authorization charge, also known as a pre-auth or authorization hold, is a temporary hold placed on a customer&#x27;s payment card. It&#x27;s used to verify that the account is valid and has sufficient funds to cover a pending transaction, without actually debiting the cardholder&#x27;s account upfront.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to pre-auth - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>preauthOptions</code> <br><a href="/android/next/androidobjects#MerchantAuthOptions"><em>MerchantAuthOptions</em></a></td><td>An object to store merchant authentication options for pre-auth operations.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a pre-auth for 1.00 in Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">preAuthorization</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;100&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//With Options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">MerchantAuthOptions</span><span class="token plain"> preauthOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">MerchantAuthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCustomerReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;CustomerReference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">preAuthorization</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;100&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#operation-start-result">OperationStartResult</a></em></td><td>Object containing information about the financial operation performed. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-auth-increasedecrease">Pre-Auth Increase/Decrease<a class="hash-link" href="#pre-auth-increasedecrease" title="Direct link to heading">​</a></h2><p><code>preAuthorizationIncrease</code></p><p>This operation allows the merchant to increase/decrease the amount of a previously performed pre-auth operation. For example, if a tab was opened at a restaurant and the consumer is adding new orders going above the initial pre-authorized amount, it is required to increase the amount of the initial pre-authorization before capturing it. If the merchant wants to release part of a pre-auth, an increase with <strong>negative</strong> amount should be passed to the function.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of the pre-auth increase, in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>originalTransactionID</code> <span class="badge badge--primary">Required</span> <br><em>String</em></td><td>Transaction ID of the original pre-auth operation</td></tr><tr><td><code>preauthOptions</code> <br><a href="/android/next/androidobjects#7"><em>Options</em></a></td><td>An object to store merchant authentication options for pre-auth operations.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a pre-auth increase for 1.00 in Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Options</span><span class="token plain"> preauthOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCustomerReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;CustomerReference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">preAuthorizationIncrease</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;100&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a pre-auth decrease for 1.00 in Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Options</span><span class="token plain"> preauthOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCustomerReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;CustomerReference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">preAuthorizationIncrease</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-100&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#operation-start-result">OperationStartResult</a></em></td><td>Object containing information about the financial operation performed. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-auth-capture">Pre-Auth Capture<a class="hash-link" href="#pre-auth-capture" title="Direct link to heading">​</a></h2><p><code>preAuthorizationCapture</code></p><p>A pre-authorized transaction can be captured to actually debit the cardholder&#x27;s account. Depending on the merchant category code, the capture needs to happen between 7 and 31 days after the original pre-authorization. If not captured the funds will be automatically released by the issuing bank.</p><p><strong>Please note that a pre-authorization can only be captured ONCE, multiple partial captures are not allowed</strong>. If for some reason, the pre-authorization was captured for an incorrect amount, you can attempt to reverse the capture (does not work with all acquirers). If the capture reversal was declined, the cardholder needs to come back into the store with his card to get refunded or re-authorize the transaction. Alternatively, the cardholder can give his card details over the phone to the merchant and a MOTO pre-auth or MOTO refund can be issued.  </p><p>Card schemes set specific rules around which businesses are able to use pre-auth transactions. Eligibility is determined based on the Merchant Category Code (MCC), together with the card scheme.</p><p>Card schemes have their own set of rules on authorisation expiry. Capturing a transaction after the scheme expiry time increases the risk of a failed capture, and may also increase the interchange and/or scheme fees charged for the transaction. Card schemes can also expire an authorisation before or after the official scheme expiry period has been reached. You can often capture a payment successfully after an authorisation has expired. Depending on the card scheme, there can be a fee for late capture, and an increase in interchange fee. The risk of cardholder chargebacks increase as well.</p><table><thead><tr><th>Scheme</th><th>MCC</th></tr></thead><tbody><tr><td>Mastercard</td><td>All MCCs except 5542</td></tr><tr><td>Visa</td><td>All MCCs except 5542</td></tr><tr><td>Discover</td><td>3351-3441, 3501-3999, 4111, 4112, 4121, 4131, 4411, 4457, 5499, 5812, 5813, 7011, 7033, 7996, 7394, 7512, 7513, 7519, 7999</td></tr><tr><td>American Express</td><td>All MCCs except 5542</td></tr></tbody></table><p><strong>VISA rules</strong></p><table><thead><tr><th>MCC</th><th>Segment</th><th>Authorization timeframe</th><th>Amount tolerance (captured amount above pre-authorized amount)</th></tr></thead><tbody><tr><td>3501-3999, 7011</td><td>Lodging</td><td>31 days</td><td>15%</td></tr><tr><td>3351-3500, 7512</td><td>Car Rental</td><td>31 days</td><td>15%</td></tr><tr><td>4411</td><td>Steamship and Cruise Lines</td><td>31 days</td><td>15%</td></tr><tr><td>7513</td><td>Truck Rentals</td><td>7 days</td><td>15%</td></tr><tr><td>7033</td><td>Trailer Parks and Campgrounds</td><td>7 days</td><td>15%</td></tr><tr><td>7519</td><td>Motor Home and Recreational Vehicle Rentals</td><td>7 days</td><td>15%</td></tr><tr><td>5552</td><td>Electric Vehicle Charging</td><td>7 days</td><td>15%</td></tr><tr><td>7523</td><td>Parking and Garages</td><td>7 days</td><td>15%</td></tr><tr><td>7394</td><td>Equipment, Tool, Furniture and Appliance Rental</td><td>7 days</td><td>none</td></tr><tr><td>7999</td><td>Recreation Services</td><td>7 days</td><td>none</td></tr><tr><td>7996</td><td>Amusement Parks, Carnivals, Circuses, Fortune Tellers</td><td>7 days</td><td>none</td></tr><tr><td>5599</td><td>Miscellaneous Automotive, Aircraft, and Farm Equipment Dealers</td><td>7 days</td><td>none</td></tr><tr><td>4457</td><td>Boat Rentals and Leasing</td><td>7 days</td><td>none</td></tr><tr><td>5571</td><td>Motorcycle Shops and Dealers</td><td>7 days</td><td>none</td></tr><tr><td>4111</td><td>Local and Suburban Commuter, Passenger Transportation, including Ferries</td><td>7 days</td><td>25 USD (or equivalent amount in local currency)</td></tr><tr><td>4112</td><td>Passenger Railways</td><td>7 days</td><td>25 USD (or equivalent amount in local currency)</td></tr><tr><td>4131</td><td>Bus Lines</td><td>7 days</td><td>25 USD (or equivalent amount in local currency)</td></tr><tr><td>5812</td><td>Eating Places and Restaurants</td><td>Same day</td><td>20%</td></tr><tr><td>5813</td><td>Drinking Places, Bars, Taverns, Cocktail Lounges, Nightclubs, Discotheques</td><td>Same day</td><td>20%</td></tr><tr><td>4121</td><td>Taxicabs and Limousines (Card-Absent Environment only)</td><td>Same day</td><td>20%</td></tr></tbody></table><p><strong>MASTERCARD rules</strong></p><table><thead><tr><th>MCC</th><th>Authorization timeframe</th><th>Amount tolerance (captured amount above pre-authorized amount)</th></tr></thead><tbody><tr><td>All MCCs</td><td>30 days</td><td>20%</td></tr></tbody></table><p><strong>Maestro rules</strong></p><table><thead><tr><th>MCC</th><th>Segment</th><th>Authorization timeframe</th><th>Amount tolerance (captured amount above pre-authorized amount)</th></tr></thead><tbody><tr><td>5812</td><td>Eating Places and Restaurants</td><td>7 days</td><td>20%</td></tr><tr><td>5814</td><td>Fast Food Restaurants</td><td>7 days</td><td>20%</td></tr></tbody></table><p><strong>AMEX rules</strong> </p><table><thead><tr><th>MCC</th><th>Authorization timeframe</th></tr></thead><tbody><tr><td>All MCCs</td><td>7 days</td></tr></tbody></table><p>Note: Pre-Auth with AMEX is only available in the United States/Canada with the processor TSYS.</p><p><strong>Discover rules</strong>  </p><table><thead><tr><th>MCC</th><th>Authorization timeframe</th></tr></thead><tbody><tr><td>Car Rental, Hotel/Lodging MCCs</td><td>30 days</td></tr><tr><td>All MCCs except Car Rental and Hotel/Lodging</td><td>10 days</td></tr></tbody></table><p><strong>Diners rules</strong>  </p><table><thead><tr><th>MCC</th><th>Debit/credit</th><th>Authorization timeframe</th></tr></thead><tbody><tr><td>Car Rental, Hotel/Lodging MCCs</td><td>All</td><td>30 days</td></tr><tr><td>All MCCs except Car Rental and Hotel/Lodging</td><td>Credit</td><td>30 days</td></tr><tr><td>All MCCs except Car Rental and Hotel/Lodging</td><td>Debit</td><td>7 days</td></tr></tbody></table><p><strong>JCB rules</strong></p><table><thead><tr><th>MCC</th><th>Authorization timeframe</th></tr></thead><tbody><tr><td>Hotel and Car rental</td><td>Time of stay/rental</td></tr><tr><td>All MCCs except Hotel and Car rental</td><td>1 year</td></tr></tbody></table><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>BigInteger</em></td><td>Amount of funds to pre-auth - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><a href="/android/next/androidobjects#13"><em>Currency</em></a></td><td>Currency of the charge</td></tr><tr><td><code>originalTransactionID</code> <span class="badge badge--primary">Required</span> <br><em>String</em></td><td>Transaction id of the original pre-auth transaction</td></tr><tr><td><code>preauthOptions</code> <br><a href="/android/next/androidobjects#7"><em>Options</em></a></td><td>An object to store merchant authentication options for pre-auth operations.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a pre-auth capture for 1.00 in Great British Pounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Options</span><span class="token plain"> preauthOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCustomerReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;CustomerReference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">preAuthorizationCapture</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token class-name">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">GBP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#operation-start-result">OperationStartResult</a></em></td><td>Object containing information about the financial operation performed. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-authcapture-reversal">Pre-Auth/Capture Reversal<a class="hash-link" href="#pre-authcapture-reversal" title="Direct link to heading">​</a></h2><p><code>preAuthorizationReversal</code></p><p>A Pre-Auth reversal allows the user to reverse a previous pre-auth operation. This operation reverts (if possible) a specific pre-auth identified with a transaction id.
A pre-authorized reversal transaction <strong>will release the whole pre-authorized amount</strong>, for example when renting a car, the pre-auth reversal allows the merchant to release the funds if the car was not damaged. For partial releases, please check the <a href="/android/next/androidtransactions#pre-auth-increasedecrease">Pre-Auth Increase/Decrease</a> operation.</p><p>A Pre-Auth reversal can be used to reverse a capture operation as well. A capture reversal transaction <strong>will release all the funds withheld</strong>. Reversing a capture operation can only be done before the funds are automatically settled at night, please note that not all acquirers support reversal of captured transactions. If a capture reversal is attempted after the funds have been moved, the operation will receive a decline.<br><br>When the capture is reverted it returns to the previous state (<a href="/android/next/androidobjects#34">CAPTURED</a> -&gt; <a href="/android/next/androidobjects#34">AUTHORISED</a>).</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>originalTransactionID</code> <span class="badge badge--primary">Required</span>  <br><em>String</em></td><td>Transaction id of the original pre-auth or capture GUID transaction.</td></tr><tr><td><code>preauthOptions</code> <br><a href="/android/next/androidobjects#7"><em>Options</em></a></td><td>An object to store merchant authentication options for pre-auth operations.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a pre-auth reversal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">preAuthorizationReversal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Options</span><span class="token plain"> preauthOptions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCustomerReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;CustomerReference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Initiate a pre-auth reversal with options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">preAuthorizationReversal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> preauthOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Events invoked</strong></p><p><a href="/android/next/androideventlisteners#14"><strong>currentTransactionStatus</strong></a></p><p>Invoked during a transaction, it fetches statuses coming from the terminal (ex : &#x27;waiting for card&#x27; or &#x27;waiting for PIN entry&#x27;).</p><hr><p><a href="/android/next/androideventlisteners#16"><strong>endOfTransaction</strong></a></p><p>Invoked when the terminal finishes processing the transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><em><a href="/android/next/androidobjects#operation-start-result">OperationStartResult</a></em></td><td>Object containing information about the financial operation performed. Most specifically the <code>transactionReference</code> which <strong>must</strong> be saved on your end in case you do not get back the transaction result object at the end of the transaction. The <code>transactionReference</code> will allow you to query the Handpoint Gateway directly to know the outcome of the transaction in case it is not delivered as planned by the terminal at the end of the transaction.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="standalone-tokenized-payments-operations-tokenize-and-modify">Standalone Tokenized Payments Operations (Tokenize and Modify)<a class="hash-link" href="#standalone-tokenized-payments-operations-tokenize-and-modify" title="Direct link to heading">​</a></h2><p><code>standaloneTokenizedPaymentsOperations</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="standalone-tokenized-sale">Standalone Tokenized Sale<a class="hash-link" href="#standalone-tokenized-sale" title="Direct link to heading">​</a></h3><p><strong> Overview </strong></p><p>The <strong><code>tokenizedOperation</code></strong> functionality in the Handpoint Android SDK enables card tokenization followed by a sale transaction. It is executed through the <code>Hapi</code> Android interface.</p><p>This operation consists of two stages:</p><ol><li><strong>Card Tokenization</strong>: The SDK tokenizes the card and triggers the <strong><code>Events.CardTokenized</code> event</strong>, providing the tokenized card details and control callbacks.</li><li><strong>Sale Execution</strong>: The integrator must invoke the <code>resume()</code> method from the callback object to proceed with the sale transaction. The outcome is returned through the <strong><code>Events.EndOfTransaction</code> event</strong>.</li></ol><hr><p><strong> Method Signature </strong></p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * Tokenized Operation on a specific device using regular parameters.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * This operation consists of two parts. The first part, performs a tokenization of the card,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * whose token is sent to the integrator through the Events.CardTokenized event.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * Once the integrator wishes to continue the operation,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * it must execute the resume method of the object sent through the event,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * with the data of the operation it wishes to perform.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * This operation will be executed and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * the result will be received through the Events.EndOfTransaction event.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * The operation supported is Sale.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param amount   The transaction amount.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param currency The currency to be used.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param options  An object containing configuration parameters for customer reference.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @return True if the command was sent successfully to the device. False if sending failed.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@JvmOverloads</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fun tokenizedOperation(amount: BigInteger, currency: Currency, options: Options = Options()): OperationStartResult</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong> Events Flow </strong></p><p><strong><em> 1. <code>Events.CardTokenized</code> </em></strong></p><p>Triggered after the card is tokenized. Provides:</p><ul><li><strong><code>CardTokenizationData</code></strong>: Contains tokenized card information.</li><li><strong><code>ResumeCallback</code></strong>: Allows the integrator to resume, cancel, or finish the operation.</li></ul><p><strong><em> 2. <code>Events.EndOfTransaction</code> </em></strong></p><p>Triggered after the sale transaction is completed, returning the transaction result.</p><hr><p><strong> cardTokenized Event Components </strong></p><p><strong><em> CardTokenizationData </em></strong></p><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>token</code></td><td><code>String</code></td><td>Tokenized card value.</td></tr><tr><td><code>expiryDate</code></td><td><code>String</code></td><td>Card&#x27;s expiry date.</td></tr><tr><td><code>tenderType</code></td><td><code>TenderType</code></td><td>Transaction type: <code>CREDIT</code>, <code>DEBIT</code>, or <code>NOT_SET</code>.</td></tr><tr><td><code>issuerCountryCode</code></td><td><code>CountryCode</code></td><td>Country code of the issuer (defaults to <code>Unknown</code>).</td></tr><tr><td><code>cardBrand</code></td><td><code>String</code></td><td>Brand of the card (e.g., Visa, MasterCard).</td></tr><tr><td><code>languagePref</code></td><td><code>String</code></td><td>Preferred language setting.</td></tr><tr><td><code>tipAmount</code></td><td><code>BigInteger</code></td><td>Tip amount (defaults to <code>BigInteger.ZERO</code>).</td></tr></tbody></table><hr><p><strong><em> ResumeCallback </em></strong></p><p>Interface responsible for managing the continuation or termination of the tokenization operation.</p><table><thead><tr><th>Method</th><th>Description</th><th>Exceptions</th></tr></thead><tbody><tr><td><code>fun resume(operationDto: OperationDto)</code></td><td>Continues the operation with a specified <code>OperationDto</code>. Only <code>Sale</code> operations are allowed.</td><td><code>ResumedOperation</code>, <code>CancelledOperation</code>, <code>TimeoutOperation</code>, <code>IllegalStateException</code></td></tr><tr><td><code>fun finishWithoutCardOperation()</code></td><td>Completes the operation without proceeding to a card transaction.</td><td><code>ResumedOperation</code>, <code>CancelledOperation</code>, <code>TimeoutOperation</code>, <code>IllegalStateException</code></td></tr><tr><td><code>fun cancel()</code></td><td>Cancels the ongoing operation.</td><td><code>ResumedOperation</code>, <code>CancelledOperation</code>, <code>TimeoutOperation</code>, <code>IllegalStateException</code></td></tr></tbody></table><blockquote><p><strong>Note:</strong><br>
<!-- -->Calling any method multiple times, after timeout, or after cancellation triggers exceptions.</p></blockquote><hr><p><strong><em> Example Handling of <code>Events.CardTokenized</code> (Kotlin) </em></strong></p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">override fun onCardTokenized(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cardTokenizationData: CardTokenizationData,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resumeCallback: ResumeCallback</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Access tokenized card details</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    val token = cardTokenizationData.token</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    val cardBrand = cardTokenizationData.cardBrand</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Decide next action: proceed with sale</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resumeCallback.resume(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        OperationDto.Sale(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            amount = BigInteger.valueOf(2000),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            currency = Currency.getInstance(&quot;USD&quot;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            options = SaleOptions(/* configuration options */)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong> OperationDto </strong></p><p>A sealed class representing supported transaction types after tokenization.</p><table><thead><tr><th>Subclass</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>Sale</code></td><td><code>amount: BigInteger</code>, <code>currency: Currency</code>, <code>options: SaleOptions</code></td><td>Initiates a sale transaction.</td></tr><tr><td><code>Refund</code></td><td><code>amount: BigInteger</code>, <code>currency: Currency</code>, <code>originalTransactionID: String?</code>, <code>options: RefundOptions</code></td><td>Initiates a refund transaction. <em>(Not allowed after tokenization)</em></td></tr><tr><td><code>SaleReversal</code></td><td><code>amount: BigInteger</code>, <code>currency: Currency</code>, <code>originalTransactionID: String</code>, <code>options: SaleReversalOptions</code></td><td>Reverses a previous sale. <em>(Not allowed after tokenization)</em></td></tr><tr><td><code>RefundReversal</code></td><td><code>amount: BigInteger</code>, <code>currency: Currency</code>, <code>originalTransactionID: String</code>, <code>options: RefundReversalOptions</code></td><td>Reverses a previous refund. <em>(Not allowed after tokenization)</em></td></tr></tbody></table><hr><p><strong> Behavior and Restrictions </strong></p><ul><li><p><strong>Only <code>Sale</code> operations are allowed</strong> when invoking <code>resume()</code> after receiving the <code>cardTokenized</code> event.</p><ul><li>Passing other operation types (<code>Refund</code>, <code>SaleReversal</code>, <code>RefundReversal</code>) will result in a transaction result with <strong><code>MessageType.FEATURE_NOT_SUPPORTED</code></strong>.</li></ul></li><li><p>Proper exception handling is required when using the <code>ResumeCallback</code> methods.</p></li></ul><hr><p><strong> Exceptions </strong></p><table><thead><tr><th>Exception</th><th>Description</th></tr></thead><tbody><tr><td><code>ResumedOperation</code></td><td>Thrown if the operation was already resumed.</td></tr><tr><td><code>CancelledOperation</code></td><td>Thrown if the operation was previously cancelled.</td></tr><tr><td><code>TimeoutOperation</code></td><td>Thrown if the operation timed out.</td></tr><tr><td><code>IllegalStateException</code></td><td>Thrown for any invalid operation state.</td></tr></tbody></table><hr><p><strong> Sequence Diagram </strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="standalone-tokenized-sale-sequence-diagram"><a target="_blank" href="/assets/files/standalone_tokenized_SALE-658f0d279fc673c875b35735dcd9a9ed.png"><img loading="lazy" alt="Standalone Tokenized SALE Sequence Diagram" src="/assets/images/standalone_tokenized_SALE-658f0d279fc673c875b35735dcd9a9ed.png" width="2068" height="1592" class="img_ev3q"></a><a class="hash-link" href="#standalone-tokenized-sale-sequence-diagram" title="Direct link to heading">​</a></h2><p><strong> Summary </strong></p><p>The <strong><code>tokenizedOperation</code></strong> method securely tokenizes card data and passes control to the integrator via the <strong><code>Events.CardTokenized</code> event</strong>, delivering:</p><ol><li><strong><code>CardTokenizationData</code></strong>: Contains the tokenized card details.</li><li><strong><code>ResumeCallback</code></strong>: Allows integrators to resume with a supported <code>Sale</code> operation, cancel, or finish without a transaction.</li></ol><p>The result of the operation is returned through the <strong><code>Events.EndOfTransaction</code> event</strong>.</p><blockquote><p><strong>Tip:</strong> Always validate and handle exceptions when interacting with <code>ResumeCallback</code> to ensure smooth operation flow.</p></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="standalone-tokenized-refund-reversal-and-refundreversal">Standalone Tokenized Refund, Reversal and RefundReversal<a class="hash-link" href="#standalone-tokenized-refund-reversal-and-refundreversal" title="Direct link to heading">​</a></h3><p><code>standaloneTokenizedRefund</code></p><p><strong> Overview </strong></p><p>The <strong><code>tokenizedOperation</code></strong> functionality in the Handpoint Android SDK allows the execution of a card tokenization followed immediately by a specified operation (such as SaleReversal, Refund, or RefundReversal). </p><p>In this version, the integrator provides the required operation as a parameter, and the SDK performs:</p><ol><li>Card Tokenization (with a REST API request to retrieve the card token).</li><li>Execution of the operation passed by the integrator.</li></ol><p>The result of both actions is delivered through the <strong><code>Events.EndOfTransaction</code> event</strong>.</p><hr><p><strong> Method Signature </strong></p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * Tokenized Operation on a specific device using regular parameters.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * This operation consists of the consecutive execution of two operations:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * Tokenization of the card and the operation passed by parameter by</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * the integrator. The result of both operations will be received through</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * the Events.EndOfTransaction event.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * The operations supported are: SaleReversal, Refund, RefundReversal</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param currency  The currency to be used.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param operation The operation to be executed.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param options   An object containing configuration parameters for customer reference.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @return True if the command was sent successfully to the device. False if the sending was not successful.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fun tokenizedOperation(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    currency: Currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    operation: OperationDto,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    options: Options = Options()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">): OperationStartResult</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong> Events Flow </strong></p><p><strong><em> Events.EndOfTransaction </em></strong></p><p>Triggered after both card tokenization and the specified operation are executed. The integrator receives the final transaction result in this event.</p><hr><p><strong> Supported Operations </strong></p><p>This version of <code>tokenizedOperation</code> supports the following <strong>OperationDto</strong> types:</p><table><thead><tr><th>OperationDto Subclass</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>Refund</code></td><td><code>amount: BigInteger</code>, <code>currency: Currency</code>, <code>originalTransactionID: String?</code>, <code>options: RefundOptions</code></td><td>Initiates a refund transaction.</td></tr><tr><td><code>SaleReversal</code></td><td><code>amount: BigInteger</code>, <code>currency: Currency</code>, <code>originalTransactionID: String</code>, <code>options: SaleReversalOptions</code></td><td>Reverses a previous sale.</td></tr><tr><td><code>RefundReversal</code></td><td><code>amount: BigInteger</code>, <code>currency: Currency</code>, <code>originalTransactionID: String</code>, <code>options: RefundReversalOptions</code></td><td>Reverses a previous refund.</td></tr></tbody></table><blockquote><p><strong>Note:</strong><br>
<code>Sale</code> operation is <strong>not supported</strong> in this version of <code>tokenizedOperation</code>.</p></blockquote><hr><p><strong> Tokenization Process </strong></p><p>Internally, the SDK performs a REST API call to retrieve the card token. Once retrieved, it immediately proceeds to execute the operation provided by the integrator.</p><hr><p><strong><em> Example Usage (Kotlin) </em></strong></p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">val refundOperation = OperationDto.Refund(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    amount = BigInteger.valueOf(1500),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    currency = Currency.getInstance(&quot;EUR&quot;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    originalTransactionID = &quot;TX123456&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    options = RefundOptions(/* options */)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val result = hapi.tokenizedOperation(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    currency = Currency.getInstance(&quot;EUR&quot;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    operation = refundOperation,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    options = Options(/* config */)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong> Behavior and Restrictions </strong></p><ul><li><p>The SDK will <strong>automatically execute</strong> both:</p><ol><li>Tokenization (via REST API).</li><li>The provided operation (<code>Refund</code>, <code>SaleReversal</code>, or <code>RefundReversal</code>).</li></ol></li><li><p>The integrator will receive the outcome via <strong><code>Events.EndOfTransaction</code></strong>.</p></li><li><p>Sale operations are <strong>not allowed</strong> in this mode.</p></li></ul><hr><p><strong> Exceptions </strong></p><p>The method itself returns <code>false</code> if the command fails to send to the device. Other exceptions related to transaction processing will be communicated via the <strong><code>Events.EndOfTransaction</code></strong> event.</p><hr><p><strong> Sequence Diagram </strong></p><p><a target="_blank" href="/assets/files/standalone_Tokenized_Refund_and_reversals-fd7a4482cb81f3ce75f93b60dc72a294.png"><img loading="lazy" alt="Standalone Tokenized Refund, Reversal and RefundReversal Sequence Diagram" src="/assets/images/standalone_Tokenized_Refund_and_reversals-fd7a4482cb81f3ce75f93b60dc72a294.png" width="2068" height="1592" class="img_ev3q"></a></p><hr><p><strong> Summary </strong></p><p>The <strong><code>tokenizedOperation</code></strong> method allows integrators to provide a specific operation upfront (Refund, SaleReversal, RefundReversal). The SDK:</p><ol><li>Retrieves the card token via REST API.</li><li>Immediately executes the operation.</li><li>Returns the result via <strong><code>Events.EndOfTransaction</code></strong>.</li></ol><blockquote><p><strong>Tip:</strong> Use this method when you want to perform tokenization and the operation in one streamlined flow, without intermediate decision points.</p></blockquote><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-tokenized-payments-operations">Cloud Tokenized Payments Operations<a class="hash-link" href="#cloud-tokenized-payments-operations" title="Direct link to heading">​</a></h2><p><code>cloudTokenizedPaymentsOperations</code></p><p><strong> Overview </strong></p><p>In Cloud mode, integrators can control the Android SDK via one of our Cloud clients, which are our <a href="/restapi/restintroduction">REST API</a>, <a href="/javascript/javascriptintroduction">JavaScript SDK</a> and <a href="/windows/windowsintroduction">Windows SDK</a>.</p><p>There are two possible types of Cloud integrations:</p><ul><li><strong>Integration with a callback URL</strong></li><li><strong>Integration with Polling</strong></li></ul><hr><p><strong>Integration with a callback URL</strong></p><p>If a <code>callbackUrl</code> and a <code>token</code> are included in the request, the terminal sends a POST with the transaction result to the specified URL. The token will be included in the HTTP header as <code>AUTH-TOKEN</code> and can be used on the callback URL side to identify or authenticate the call.</p><p><strong><em>Example:</em></strong></p><p><em>Request:</em></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -X POST -H</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ApiKeyCloud: XXXXXXX-KXDMZV1-HW8MXBG-XXXXXXX&quot;</span><span class="token plain"> -H</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-d </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;operation&quot;: &quot;sale&quot;, &quot;terminal_type&quot;:&quot;PAXA910S&quot;, &quot;serial_number&quot;: &quot;2840011110&quot;, &quot;amount&quot;: &quot;1034&quot;, &quot;currency&quot;: &quot;EUR&quot;, &quot;tokenize&quot;: true, &quot;callbackUrl&quot;: &quot;https://results.example.com/callback&quot;, &quot;token&quot;: &quot;auth-token-1&quot; }&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://cloud.handpoint.io/transactions</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Response:</em></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;statusMessage&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Operation Accepted&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Callback:</em></p><p>The following is an example of the transaction result sent to the specified <code>callbackUrl</code>:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;accountType&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;aid&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;A0000000041010&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;arc&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;authorisationCode&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;010119&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;balance&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token null keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;budgetNumber&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;cardEntryType&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ICC&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;cardHolderName&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;cardLanguagePreference&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;cardSchemeName&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;VISA&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;cardToken&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;535120cMXnuK6046&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;cardTypeId&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;************6046&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;chipTransactionReport&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;currency&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;EUR&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;customData&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;...&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;customerReceipt&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://receipts.handpoint.io/receipts/f6059a10-c1fe-11ef-9cf2-8b8a2cdbabca/customer.html&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;customerReference&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;deviceStatus&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;applicationName&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Atom&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;applicationVersion&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;20.4.9.2-RC.5&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;batteryCharging&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Full&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;batteryStatus&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;100&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;batterymV&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;8154&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;bluetoothName&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;PAXA910S&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;externalPower&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;USB&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;serialNumber&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2840011110&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;statusMessage&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;dueAmount&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;errorMessage&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;expiryDateMMYY&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0129&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;finStatus&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;AUTHORISED&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;iad&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0210A04003240000000000000000000000FF&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;issuerResponseCode&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;00&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;maskedCardNumber&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;************6046&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;merchantAddress&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Random Street, Some City&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;merchantName&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Random Merchant&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;merchantReceipt&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://receipts.handpoint.io/receipts/f6059a10-c1fe-11ef-9cf2-8b8a2cdbabca/merchant.html&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;metadata&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token null keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;mid&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;12S001&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;moneyRemittanceOptions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token null keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;multiLanguageErrorMessages&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;multiLanguageStatusMessages&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;en_CA&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Approved or completed successfully&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token property">&quot;fr_FR&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Transaction approuvée&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;originalEFTTransactionID&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;paymentScenario&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;CHIPCONTACTLESS&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;requestedAmount&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">524</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;rrn&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;513815902180&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;signatureUrl&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;statusMessage&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Approved or completed successfully&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;tenderType&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;CREDIT&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;tid&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;123123&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;tipAmount&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;totalAmount&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">524</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;transactionID&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;16059a10-c1fe-11ef-9cf2-8b8a2cdbabca&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;transactionOrigin&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;CLOUD&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;transactionReference&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;b45ff306-78f2-4d3b-970c-e47c8d9b9f83&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;tsi&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;tvr&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0000008001&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;SALE&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;unMaskedPan&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;verificationMethod&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;NOT_REQUIRED&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;efttimestamp&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1735048275000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;efttransactionID&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;16059a10-c1fe-11ef-9cf2-8b8a2cdbabca&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;tipPercentage&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;recoveredTransaction&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Integration using Polling</strong></p><p>If the request does not include a <code>callbackUrl</code> and a <code>token</code>, then polling can be used to retrieve the transaction result from Handpoint&#x27;s transaction-result endpoint.</p><p><strong><em>Example:</em></strong></p><p><em>Request:</em></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -X POST -H</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ApiKeyCloud: XXXXXXX-KXDMZV1-HW8MXBG-XXXXXXX&quot;</span><span class="token plain"> -H</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-d </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;operation&quot;: &quot;sale&quot;, &quot;terminal_type&quot;:&quot;PAXA910S&quot;, &quot;serial_number&quot;: &quot;2840011110&quot;, &quot;amount&quot;: &quot;1034&quot;, &quot;currency&quot;: &quot;EUR&quot;, &quot;tokenize&quot;: true }&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://cloud.handpoint.io/transactions</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Response:</em></p><p>Using the <code>transactionResultId</code>, integrators can poll the transaction-result endpoint to retrieve the result:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;statusMessage&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Operation Accepted&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;transactionResultId&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1840011114-1735048331833&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Polling request:</em></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -i -X GET -H</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ApiKeyCloud: XXXXXXX-XXXXXXX-XXXXXXX-XXXXXXX&quot;</span><span class="token plain"> -H</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://cloud.handpoint.io/transaction-result/1840011114-1735048331833</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Possible responses from polling:</em></p><ul><li>204: Transaction still in process.</li><li>200: Transaction result is available.</li></ul><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-tokenized-sale">Cloud Tokenized Sale<a class="hash-link" href="#cloud-tokenized-sale" title="Direct link to heading">​</a></h3><p><strong>Overview</strong></p><p>The <strong>Cloud Tokenized Operation</strong> enables remote-triggered financial operations, where a cloud-based system initiates a request to tokenize a card and perform a <strong>Sale</strong> transaction using the Android SDK.</p><p>This operation is initiated by sending a <strong><code>CloudFinancialRequest</code></strong> object. The SDK handles the following workflow:</p><ol><li>Parses and validates the <code>CloudFinancialRequest</code>.</li><li>Tokenizes the card (if <code>tokenize</code> is <code>true</code> and <code>operation</code> is <code>Sale</code>).</li><li>Triggers the <strong><code>Events.CardTokenized</code></strong> event with token and callback.</li><li>Proceeds with the Sale operation upon <code>resume()</code> call.</li><li>Emits the final result via <strong><code>Events.EndOfTransaction</code></strong>.</li></ol><hr><p><strong>CloudFinancialRequest</strong></p><p><strong>Description</strong></p><p>A data object that represents the request payload for initiating cloud-based financial operations including tokenized sales.</p><p><strong>Key Fields</strong></p><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>operation</code></td><td><code>Operations</code></td><td>Must be set to <code>Operations.Sale</code> for this flow.</td></tr><tr><td><code>tokenize</code></td><td><code>Boolean</code></td><td>Must be set to <code>true</code> to trigger card tokenization.</td></tr><tr><td><code>amount</code></td><td><code>String?</code></td><td>Transaction amount as string.</td></tr><tr><td><code>currency</code></td><td><code>String?</code></td><td>Currency code.</td></tr><tr><td><code>callbackUrl</code></td><td><code>String?</code></td><td>If present, indicates REST API request.</td></tr><tr><td><code>originalTransactionId</code></td><td><code>String</code></td><td>Identifier of original transaction (if any).</td></tr><tr><td><code>uuid</code></td><td><code>String</code></td><td>Event UUID, auto-formatted as 6-digit string.</td></tr><tr><td><code>transactionReference</code></td><td><code>String</code></td><td>Reference for idempotency; auto-generated if blank.</td></tr><tr><td><code>receipt</code></td><td><code>String?</code></td><td>Raw or URL-based receipt data.</td></tr><tr><td><code>metadata</code></td><td><code>Metadata?</code></td><td>Optional metadata for the operation.</td></tr><tr><td><code>merchantAuth</code></td><td><code>MerchantAuth?</code></td><td>Merchant authentication object.</td></tr><tr><td><code>duplicateCheck</code></td><td><code>Boolean</code></td><td>Enables duplicate request validation.</td></tr><tr><td><code>duplicateCheckEndpoint</code></td><td><code>String</code></td><td>Optional custom endpoint for duplicate checks.</td></tr></tbody></table><blockquote><p><strong>Note:</strong> Other fields may be present but are not required for the tokenized Sale flow.</p></blockquote><hr><p><strong>Internal Behavior</strong></p><ul><li>The SDK uses <code>getParsedAmount()</code> and <code>getParsedCurrency()</code> to convert string values into typed <code>BigInteger</code> and <code>Currency</code>.</li><li>If <code>callbackUrl</code> is present, the request is treated as a REST API request.</li><li>If <code>tokenize</code> is <code>true</code> and <code>operation == Sale</code>, the card is tokenized, and the <strong><code>Events.CardTokenized</code></strong> event is emitted.</li><li>After receiving the <code>resume()</code> call, the SDK performs the Sale operation.</li></ul><hr><p><strong>Events Flow</strong></p><ol><li><code>Events.CardTokenized</code></li></ol><p>Emitted after card tokenization. Provides:</p><ul><li><code>CardTokenizationData</code>: Includes card token and card info.</li><li><code>ResumeCallback</code>: To resume with the <code>Sale</code> operation.</li></ul><ol start="2"><li><code>Events.EndOfTransaction</code></li></ol><p>Emitted after the sale is completed.</p><hr><p><strong>Behavior and Restrictions</strong></p><ul><li>The only supported operation for this flow is <strong>Sale</strong>.</li><li>Must set:<ul><li><code>operation = Operations.Sale</code></li><li><code>tokenize = true</code></li></ul></li><li>Invoking <code>resume()</code> with any operation other than <code>Sale</code> will result in <code>MessageType.FEATURE_NOT_SUPPORTED</code>.</li></ul><hr><p><strong>Example CloudFinancialRequest JSON</strong></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;operation&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Sale&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;tokenize&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;amount&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;currency&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;EUR&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;transactionReference&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;a1b2c3d4&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;callbackUrl&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://merchant.com/callback&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>Example Kotlin Flow</strong></p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">override fun onCardTokenized(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cardTokenizationData: CardTokenizationData,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resumeCallback: ResumeCallback</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    val sale = OperationDto.Sale(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        amount = cardTokenizationData.tipAmount,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        currency = Currency.getInstance(&quot;EUR&quot;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options = SaleOptions(/* additional config */)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resumeCallback.resume(sale)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>Sequence Diagram</strong></p><p><a target="_blank" href="/assets/files/cloud_tokenized_Sale-c6593ad6d9aaa852da56409f3489e547.png"><img loading="lazy" alt="Cloud Tokenized SALE" src="/assets/images/cloud_tokenized_Sale-c6593ad6d9aaa852da56409f3489e547.png" width="2068" height="1592" class="img_ev3q"></a></p><hr><p><strong>Summary</strong></p><p>The <strong>Cloud Tokenized Operation</strong> enables external services to initiate tokenized Sale transactions through a structured <code>CloudFinancialRequest</code>. The SDK handles card tokenization and executes the Sale transaction if the correct flags are set.</p><blockquote><p><strong>Tip:</strong> This is ideal for headless or server-triggered flows that require secure card tokenization and transaction execution in a single interaction.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-tokenized-sale-reversal">Cloud Tokenized Sale Reversal<a class="hash-link" href="#cloud-tokenized-sale-reversal" title="Direct link to heading">​</a></h3><p><strong>Overview</strong></p><p>The <strong>Sale Reversal Tokenized Operation</strong> is a cloud-initiated process that tokenizes a card and performs a <strong>Sale Reversal</strong> transaction. This operation is triggered via a <code>CloudFinancialRequest</code> object and follows the same interaction pattern as other dependant tokenized operations.</p><p>It is identified by:</p><ul><li><code>operation = Operations.SaleReversal</code></li><li><code>tokenize = true</code></li></ul><p>Upon receiving this request, the SDK emits the <strong><code>Events.DependantReversalReceived</code></strong> event. The integrator is then responsible for controlling the transaction flow using the <code>ResumeDependantOperationExecutor</code> interface.</p><hr><p><strong>CloudFinancialRequest Configuration</strong></p><p><strong>Required Fields</strong></p><table><thead><tr><th>Field</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>operation</code></td><td><code>Operations.SaleReversal</code></td><td>Identifies a Sale Reversal request.</td></tr><tr><td><code>tokenize</code></td><td><code>true</code></td><td>Triggers tokenization before the operation.</td></tr></tbody></table><p>Other fields such as <code>originalTransactionId</code>, <code>currency</code>, <code>amount</code>, and <code>transactionReference</code> must also be set as needed.</p><hr><p><strong>Event: <code>Events.DependantReversalReceived</code></strong></p><p>Emitted when the SDK receives a cloud request for a <strong>Sale Reversal</strong> with tokenization enabled. The integrator handles this event via the <code>DependantOperationEvent</code> interface:</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">interface DependantOperationEvent {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun dependantRefundReceived(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        amount: BigInteger,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        currency: Currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        originalTransactionId: String,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        resumeDependantOperation: ResumeDependantOperation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun dependantReversalReceived(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        originalTransactionId: String,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        resumeDependantOperation: ResumeDependantOperation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>Interface: ResumeDependantOperationExecutor</strong></p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">interface ResumeDependantOperationExecutor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun executeDependantOperation(amount: BigInteger, currency: Currency, originalTransactionId: String)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun finishWithoutCardOperation()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun cancel()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>Implementation: ResumeDependantSaleReversalExecutorImpl</strong></p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class ResumeDependantSaleReversalExecutorImpl(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val currency: Currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val originalTransactionId: String,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val options: InternalSaleReversalOptions,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val delegate: Hapi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">): ResumeDependantOperationExecutor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun executeDependantOperation(amount: BigInteger, currency: Currency, originalTransactionId: String) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val refundOperationDto = OperationDto.SaleReversal(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            amount,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            originalTransactionId,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            options</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val result = delegate.tokenizedOperation(currency, refundOperationDto, options).operationStarted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (!result) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            val transactionResult = InstancesManager.transactionData.generateTransactionResultWithoutResponse()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            transactionResult.finStatus = FinancialStatus.FAILED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            transactionResult.transactionOrigin = TransactionOrigin.CLOUD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            sendTransactionResult(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun finishWithoutCardOperation() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val transactionResult = InstancesManager.transactionData.generateTransactionResultWithoutResponse()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.finStatus = FinancialStatus.AUTHORISED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.type = TransactionType.VOID_SALE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.currency = currency</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.totalAmount = BigInteger.ZERO</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.transactionOrigin = TransactionOrigin.CLOUD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.transactionID = UUID.randomUUID().toString()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.eFTTransactionID = transactionResult.transactionID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.originalEFTTransactionID = originalTransactionId</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        InstancesManager.cardReader.isCardPresent = true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sendTransactionResult(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun cancel() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val transactionResult = InstancesManager.transactionData.generateTransactionResultWithoutResponse()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.finStatus = FinancialStatus.CANCELLED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.type = TransactionType.VOID_SALE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.currency = Currency.Unknown</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.totalAmount = BigInteger.ZERO</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.transactionOrigin = TransactionOrigin.CLOUD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.originalEFTTransactionID = originalTransactionId</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sendTransactionResult(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    internal fun sendTransactionResult(transactionResult: TransactionResult) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        TransactionResultHandler.transactionFinished(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>Behavior and Flow</strong></p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>executeDependantOperation(...)</code></td><td>Executes the <code>SaleReversal</code> operation after tokenization.</td></tr><tr><td><code>finishWithoutCardOperation()</code></td><td>Returns an <code>AUTHORISED</code> transaction result without financial movement.</td></tr><tr><td><code>cancel()</code></td><td>Sends a <code>CANCELLED</code> transaction result indicating cancellation.</td></tr></tbody></table><hr><p><strong>Sequence Diagram</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="standalone-tokenized-refund-reversal-and-refundreversal-sequence-diagram"><a target="_blank" href="/assets/files/cloud_tokenized_SaleReversal-48d5006c05ace5d84adf4a08e468ba30.png"><img loading="lazy" alt="Standalone Tokenized Refund, Reversal and RefundReversal Sequence Diagram" src="/assets/images/cloud_tokenized_SaleReversal-48d5006c05ace5d84adf4a08e468ba30.png" width="2068" height="1592" class="img_ev3q"></a><a class="hash-link" href="#standalone-tokenized-refund-reversal-and-refundreversal-sequence-diagram" title="Direct link to heading">​</a></h2><p><strong>Summary</strong></p><p>The <strong>Sale Reversal Tokenized Operation</strong> is a secure, cloud-triggered flow for performing a <strong>Sale Reversal</strong> using a tokenized card. The operation is handled through the <code>DependantReversalReceived</code> event and executed with a <code>ResumeDependantOperationExecutor</code> implementation.</p><blockquote><p><strong>Tip:</strong> Use <code>finishWithoutCardOperation()</code> when the sale reversal is already completed outside the SDK but you want to report it as authorised for consistency.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-tokenized-refund">Cloud Tokenized Refund<a class="hash-link" href="#cloud-tokenized-refund" title="Direct link to heading">​</a></h3><p><strong>Overview</strong></p><p>The <strong>Refund Tokenized Operation</strong> is a cloud-based flow that allows merchants to initiate a tokenized refund from a remote system. It uses the same <code>CloudFinancialRequest</code> object as other cloud operations.</p><p>This operation is identified by:</p><ul><li><code>operation = Operations.Refund</code></li><li><code>tokenize = true</code></li></ul><p>Upon receiving the request, the SDK emits the <strong><code>Events.DependantRefundReceived</code></strong> event. The integrator must handle this event by using the <strong><code>ResumeDependantOperationExecutor</code></strong> interface to define the next step.</p><hr><p><strong>CloudFinancialRequest Configuration</strong></p><p><strong>Required Fields</strong></p><table><thead><tr><th>Field</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>operation</code></td><td><code>Operations.Refund</code></td><td>Indicates the refund operation.</td></tr><tr><td><code>tokenize</code></td><td><code>true</code></td><td>Enables card tokenization.</td></tr></tbody></table><p>Other standard fields such as <code>amount</code>, <code>currency</code>, <code>originalTransactionId</code>, and <code>transactionReference</code> should be populated according to the use case.</p><hr><p><strong>Event: <code>Events.DependantRefundReceived</code></strong></p><p>Triggered when a tokenized refund request is received from the cloud. The integrator must respond using a <code>ResumeDependantOperationExecutor</code> implementation.</p><hr><p><strong>Interface: ResumeDependantOperationExecutor</strong></p><p>Defines the actions the integrator must take after receiving the refund request.</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">interface ResumeDependantOperationExecutor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun executeDependantOperation(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        amount: BigInteger,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        currency: Currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        originalTransactionId: String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun finishWithoutCardOperation()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun cancel()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>Implementation: ResumeDependantRefundExecutorImpl</strong></p><p>This implementation manages the refund operation execution and fallback flows.</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class ResumeDependantRefundExecutorImpl(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val currency: Currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val options: InternalRefundOptions,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val originalTransactionId: String,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val delegate: Hapi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">) : ResumeDependantOperationExecutor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun executeDependantOperation(amount: BigInteger, currency: Currency, originalTransactionId: String) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val refundOperationDto = OperationDto.Refund(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            amount,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            originalTransactionId.ifBlank { null },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            options</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val result = delegate.tokenizedOperation(currency, refundOperationDto, options).operationStarted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (!result) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            val transactionResult = InstancesManager.transactionData.generateTransactionResultWithoutResponse()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            transactionResult.finStatus = FinancialStatus.FAILED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            sendTransactionResult(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun finishWithoutCardOperation() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val transactionResult = InstancesManager.transactionData.generateTransactionResultWithoutResponse()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.originalEFTTransactionID = originalTransactionId</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.finStatus = FinancialStatus.AUTHORISED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.type = TransactionType.REFUND</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.currency = currency</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.totalAmount = BigInteger.ZERO</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.transactionOrigin = TransactionOrigin.CLOUD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.transactionID = UUID.randomUUID().toString()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.eFTTransactionID = transactionResult.transactionID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        InstancesManager.cardReader.isCardPresent = true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sendTransactionResult(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun cancel() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val transactionResult = InstancesManager.transactionData.generateTransactionResultWithoutResponse()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.finStatus = FinancialStatus.CANCELLED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.type = TransactionType.REFUND</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.currency = currency</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.totalAmount = BigInteger.ZERO</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.transactionOrigin = TransactionOrigin.CLOUD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.originalEFTTransactionID = originalTransactionId</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sendTransactionResult(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    internal fun sendTransactionResult(transactionResult: TransactionResult) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        TransactionResultHandler.transactionFinished(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>Behavior and Flow</strong></p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>executeDependantOperation(...)</code></td><td>Triggers the refund transaction using the provided amount, currency, and original transaction ID.</td></tr><tr><td><code>finishWithoutCardOperation()</code></td><td>Sends a transaction result with <code>AUTHORISED</code> status but <strong>without processing a refund</strong> — used when the refund was completed outside the SDK.</td></tr><tr><td><code>cancel()</code></td><td>Sends a transaction result with <code>CANCELLED</code> status — used when the integrator cancels the operation.</td></tr></tbody></table><hr><p><strong>Sequence Diagram</strong></p><p><a target="_blank" href="/assets/files/cloud_tokenized_Refund-b3508452b56d3bb18fdd21d3924186ed.png"><img loading="lazy" alt="Cloud Tokenized Refund Sequence Diagram" src="/assets/images/cloud_tokenized_Refund-b3508452b56d3bb18fdd21d3924186ed.png" width="2068" height="1592" class="img_ev3q"></a></p><hr><p><strong>Summary</strong></p><p>The <strong>Refund Tokenized Operation</strong> is a controlled cloud-based refund workflow that tokenizes the card and delegates control to the integrator for determining the refund outcome.</p><ul><li>Triggered via <code>CloudFinancialRequest</code> with <code>operation = Refund</code> and <code>tokenize = true</code>.</li><li>Uses the <code>ResumeDependantOperationExecutor</code> interface to define the refund behavior.</li><li>Provides flexibility to execute, authorize without refund, or cancel the transaction.</li></ul><blockquote><p><strong>Tip:</strong> Use <code>finishWithoutCardOperation()</code> when refund logic is handled outside the SDK and you only need to notify the POS system.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-tokenized-refund-reversal">Cloud Tokenized Refund Reversal<a class="hash-link" href="#cloud-tokenized-refund-reversal" title="Direct link to heading">​</a></h3><p><strong>Overview</strong></p><p>The <strong>Refund Reversal Tokenized Operation</strong> is a cloud-triggered operation that securely tokenizes a card and performs a <strong>Refund Reversal</strong>. This operation is initiated via a <code>CloudFinancialRequest</code> object with:</p><ul><li><code>operation = Operations.RefundReversal</code></li><li><code>tokenize = true</code></li></ul><p>After receiving the request, the SDK emits the <strong><code>Events.DependantReversalReceived</code></strong> event. The integrator must respond by using the <strong><code>ResumeDependantOperationExecutor</code></strong> interface to control how the operation proceeds.</p><hr><p><strong>CloudFinancialRequest Configuration</strong></p><p><strong>Required Fields</strong></p><table><thead><tr><th>Field</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>operation</code></td><td><code>Operations.RefundReversal</code></td><td>Indicates the refund reversal operation.</td></tr><tr><td><code>tokenize</code></td><td><code>true</code></td><td>Enables card tokenization.</td></tr></tbody></table><p>Other standard fields such as <code>amount</code>, <code>currency</code>, <code>originalTransactionId</code>, and <code>transactionReference</code> should also be included.</p><hr><p><strong>Event: <code>Events.DependantReversalReceived</code></strong></p><p>This event is emitted after receiving a valid cloud request for a refund reversal. The integrator must implement <code>ResumeDependantOperationExecutor</code> to define the next action.</p><hr><p><strong>Interface: ResumeDependantOperationExecutor</strong></p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">interface ResumeDependantOperationExecutor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun executeDependantOperation(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        amount: BigInteger,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        currency: Currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        originalTransactionId: String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun finishWithoutCardOperation()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun cancel()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>Implementation: ResumeDependantRefundReversalExecutorImpl</strong></p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class ResumeDependantRefundReversalExecutorImpl(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val currency: Currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val originalTransactionId: String,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val options: InternalRefundReversalOptions,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val delegate: Hapi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">): ResumeDependantOperationExecutor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun executeDependantOperation(amount: BigInteger, currency: Currency, originalTransactionId: String) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val refundOperationDto = OperationDto.RefundReversal(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            amount,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            currency,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            originalTransactionId,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            options</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val result = delegate.tokenizedOperation(currency, refundOperationDto, options).operationStarted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (!result) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            val transactionResult = InstancesManager.transactionData.generateTransactionResultWithoutResponse()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            transactionResult.finStatus = FinancialStatus.FAILED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            sendTransactionResult(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun finishWithoutCardOperation() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val transactionResult = InstancesManager.transactionData.generateTransactionResultWithoutResponse()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.finStatus = FinancialStatus.AUTHORISED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.type = TransactionType.VOID_REFUND</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.currency = currency</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.totalAmount = BigInteger.ZERO</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.transactionOrigin = TransactionOrigin.CLOUD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.transactionID = UUID.randomUUID().toString()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.eFTTransactionID = transactionResult.transactionID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.originalEFTTransactionID = originalTransactionId</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        InstancesManager.cardReader.isCardPresent = true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sendTransactionResult(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun cancel() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        val transactionResult = InstancesManager.transactionData.generateTransactionResultWithoutResponse()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.finStatus = FinancialStatus.CANCELLED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.type = TransactionType.VOID_REFUND</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.currency = Currency.Unknown</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.totalAmount = BigInteger.ZERO</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.transactionOrigin = TransactionOrigin.CLOUD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        transactionResult.originalEFTTransactionID = originalTransactionId</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sendTransactionResult(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    internal fun sendTransactionResult(transactionResult: TransactionResult) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        TransactionResultHandler.transactionFinished(transactionResult)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>Behavior and Flow</strong></p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>executeDependantOperation(...)</code></td><td>Launches the <code>RefundReversal</code> operation after tokenization.</td></tr><tr><td><code>finishWithoutCardOperation()</code></td><td>Sends an <code>AUTHORISED</code> transaction result without moving funds — used when reversal is handled externally.</td></tr><tr><td><code>cancel()</code></td><td>Sends a <code>CANCELLED</code> result indicating the integrator aborted the operation.</td></tr></tbody></table><hr><p><strong>Sequence Diagram</strong></p><p><a target="_blank" href="/assets/files/cloud_tokenized_refund_Reversal-a8f1e7e9cb1f3430066adc53fc4ee59b.png"><img loading="lazy" alt="Cloud Tokenized Refund Reversal Sequence Diagram" src="/assets/images/cloud_tokenized_refund_Reversal-a8f1e7e9cb1f3430066adc53fc4ee59b.png" width="2068" height="1592" class="img_ev3q"></a></p><hr><p><strong>Summary</strong></p><p>The <strong>Refund Reversal Tokenized Operation</strong> is a cloud-driven flow designed to securely tokenize a card and optionally reverse a refund. It follows the same interaction pattern as other dependant cloud operations, with three possible paths controlled by the integrator:</p><ul><li>Execute the refund reversal.</li><li>Acknowledge the transaction without refund movement.</li><li>Cancel the operation entirely.</li></ul><blockquote><p><strong>Tip:</strong> Use this operation in cloud or headless setups where refunds need to be securely reversed with authorization logging.</p></blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/android/androidintegrationguide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Integration Guides</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/android/androiddevicemanagement"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Terminal Management</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#2" class="table-of-contents__link toc-highlight">Sale</a></li><li><a href="#3" class="table-of-contents__link toc-highlight">Sale And Tokenize Card</a></li><li><a href="#4" class="table-of-contents__link toc-highlight">Sale Reversal</a></li><li><a href="#5" class="table-of-contents__link toc-highlight">Refund</a></li><li><a href="#automatic-refund" class="table-of-contents__link toc-highlight">Automatic Refund</a></li><li><a href="#automatic-partial-refund" class="table-of-contents__link toc-highlight">Automatic Partial Refund</a></li><li><a href="#6" class="table-of-contents__link toc-highlight">Refund reversal</a></li><li><a href="#7" class="table-of-contents__link toc-highlight">MoTo Sale</a></li><li><a href="#8" class="table-of-contents__link toc-highlight">MoTo Refund</a></li><li><a href="#9" class="table-of-contents__link toc-highlight">MoTo Reversal</a></li><li><a href="#10" class="table-of-contents__link toc-highlight">MoTo Pre-Auth</a></li><li><a href="#signature-result" class="table-of-contents__link toc-highlight">Signature result</a></li><li><a href="#tip-adjustment" class="table-of-contents__link toc-highlight">Tip Adjustment</a></li><li><a href="#12" class="table-of-contents__link toc-highlight">Tokenize Card</a></li><li><a href="#13" class="table-of-contents__link toc-highlight">Card PAN</a></li><li><a href="#pre-auth" class="table-of-contents__link toc-highlight">Pre-Auth</a></li><li><a href="#pre-auth-increasedecrease" class="table-of-contents__link toc-highlight">Pre-Auth Increase/Decrease</a></li><li><a href="#pre-auth-capture" class="table-of-contents__link toc-highlight">Pre-Auth Capture</a></li><li><a href="#pre-authcapture-reversal" class="table-of-contents__link toc-highlight">Pre-Auth/Capture Reversal</a></li><li><a href="#standalone-tokenized-payments-operations-tokenize-and-modify" class="table-of-contents__link toc-highlight">Standalone Tokenized Payments Operations (Tokenize and Modify)</a><ul><li><a href="#standalone-tokenized-sale" class="table-of-contents__link toc-highlight">Standalone Tokenized Sale</a></li></ul></li><li><a href="#standalone-tokenized-sale-sequence-diagram" class="table-of-contents__link toc-highlight">Standalone Tokenized SALE Sequence Diagram</a><ul><li><a href="#standalone-tokenized-refund-reversal-and-refundreversal" class="table-of-contents__link toc-highlight">Standalone Tokenized Refund, Reversal and RefundReversal</a></li></ul></li><li><a href="#cloud-tokenized-payments-operations" class="table-of-contents__link toc-highlight">Cloud Tokenized Payments Operations</a><ul><li><a href="#cloud-tokenized-sale" class="table-of-contents__link toc-highlight">Cloud Tokenized Sale</a></li><li><a href="#cloud-tokenized-sale-reversal" class="table-of-contents__link toc-highlight">Cloud Tokenized Sale Reversal</a></li></ul></li><li><a href="#standalone-tokenized-refund-reversal-and-refundreversal-sequence-diagram" class="table-of-contents__link toc-highlight">Standalone Tokenized Refund, Reversal and RefundReversal Sequence Diagram</a><ul><li><a href="#cloud-tokenized-refund" class="table-of-contents__link toc-highlight">Cloud Tokenized Refund</a></li><li><a href="#cloud-tokenized-refund-reversal" class="table-of-contents__link toc-highlight">Cloud Tokenized Refund Reversal</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cpdocs/index.html">In-Person Payments Docs</a></li><li class="footer__item"><a href="https://developer-ecomm.handpoint.io/cnpdocs/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Online Payments Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://txnfeedapi.handpoint.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Transaction Analytics API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tmsdoc.handpoint.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Merchants &amp; Terminals Management API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.handpoint.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Handpoint Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/handpoint" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/handpointltd?lang=en" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Get our Apps</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://play.google.com/store/apps/details?id=com.handpoint.hipos&amp;hl=en&amp;gl=US&amp;pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1" target="_blank" rel="noopener noreferrer" class="footer__link-item">Get it on Google Play<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://apps.apple.com/us/app/handpoint/id1450546788?itsct=apps_box_link&amp;itscg=30200" target="_blank" rel="noopener noreferrer" class="footer__link-item">Download on the App Store<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.handpoint.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Handpoint Status Page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://handpoint.atlassian.net/wiki/spaces/PD/overview?homepageId=5898250" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://handpoint.us6.list-manage.com/subscribe?u=4d9dff9e7edb7e57a67a7b252&amp;id=0a2179241e" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subscribe to the Handpoint Newsletter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/handpoint" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.handpoint.io" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://handpoint.imgix.net/handpoint-logo-w.png?w=150" alt="Handpoint Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="https://handpoint.imgix.net/handpoint-logo-w.png?w=150" alt="Handpoint Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2025 Handpoint</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a0df38ac.js"></script>
<script src="/assets/js/main.483f6cad.js"></script>
</body>
</html>